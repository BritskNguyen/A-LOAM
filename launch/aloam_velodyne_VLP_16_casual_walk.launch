<launch>
    
    <arg name="loam_id" default = "horz" />

    <!-- scan registration -->
    <rosparam param="/ascanRegistration_$(arg loam_id)/T_B_Bl">
        [-1.0,  0.0,  0.0,  0.0,
            0.0,  1.0,  0.0,  0.0,
            0.0,  0.0, -1.0,  0.0,
            0.0,  0.0,  0.0,  0.0 ]
    </rosparam>
    <node pkg="aloam" type="ascanRegistration" name="ascanRegistration_$(arg loam_id)" output="screen" >
        <param name="loam_id"          type="string"  value="$(arg loam_id)"/>
        <param name="pointcloud_topic" type="string"  value="/points_raw"/>
        <param name="scan_line"        type="int"     value="16"/>
        <param name="minimum_range"    type="double"  value="0.3"/>
    </node>

    <!-- odmetry -->
    <node pkg="aloam" type="alaserOdometry" name="alaserOdometry_$(arg loam_id)"    output="log" >
        <param name="loam_id"          type="string"  value="$(arg loam_id)"/>
        <param name="mapping_skip_frame" type="int" value="1" />
    </node>

    <!-- mapping -->       
        <node pkg="aloam" type="alaserMapping"     name="alaserMapping_$(arg loam_id)"  output="log" >
        <param name="loam_id"          type="string"  value="$(arg loam_id)"/>
        <param name="mapping_line_resolution"  type="double" value="0.2" />
        <param name="mapping_plane_resolution" type="double" value="0.4" />
    </node>

    <param name="/use_sim_time" value="true" />
    <node required="true" pkg="rosbag" type="play" name="rosbag_play"
          args="--clock /home/tmn/DATASETS/LIOSAM/casual_walk.bag"/>

    <arg name="rviz" default="true" />
    <group if="$(arg rviz)">
        <node launch-prefix="nice" pkg="rviz" type="rviz" name="rviz" args="-d $(find aloam)/rviz_cfg/aloam.rviz" />
    </group>


</launch>
